{% extends 'base.html.twig' %}

{% block title %}Pending Follow Requests{% endblock %}

{% block body %}
    <h1>Pending Follow Requests</h1>

    {% for request in requests %}
        <div class="card" style="display: flex; gap: 15px; align-items: center;">
            {% set requesterProfile = request.requester.profile %}
            {% if requesterProfile and requesterProfile.photoFilename %}
                <img src="/uploads/photos/{{ requesterProfile.photoFilename }}" class="avatar" alt="{{ requesterProfile.displayName }}">
            {% else %}
                <div class="avatar" style="display: flex; align-items: center; justify-content: center; font-size: 20px; color: #666;">?</div>
            {% endif %}
            <div style="flex: 1;">
                <a href="{{ path('app_profile_show', {id: request.requester.id}) }}">
                    <strong>{{ requesterProfile ? requesterProfile.displayName : request.requester.email }}</strong>
                </a>
            </div>
            <div style="display: flex; gap: 5px;">
                <form method="post" action="{{ path('app_follow_approve', {id: request.id}) }}">
                    <button type="submit" class="btn btn-success">Approve</button>
                </form>
                <form method="post" action="{{ path('app_follow_reject', {id: request.id}) }}">
                    <button type="submit" class="btn btn-danger">Reject</button>
                </form>
            </div>
        </div>
    {% else %}
        <p>No pending follow requests.</p>
    {% endfor %}
{% endblock %}

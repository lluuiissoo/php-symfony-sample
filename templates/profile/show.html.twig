{% extends 'base.html.twig' %}

{% block title %}{{ profile.displayName ?? 'Profile' }}{% endblock %}

{% block body %}
    <div class="card">
        <div style="display: flex; gap: 20px; align-items: flex-start;">
            {% if profile and profile.photoFilename %}
                <img src="/uploads/photos/{{ profile.photoFilename }}" class="avatar" style="width: 100px; height: 100px;" alt="{{ profile.displayName }}">
            {% else %}
                <div class="avatar" style="width: 100px; height: 100px; display: flex; align-items: center; justify-content: center; font-size: 36px; color: #666;">?</div>
            {% endif %}
            <div>
                <h1>{{ profile.displayName ?? 'No name set' }}</h1>
                {% if profile and profile.bio %}
                    <p>{{ profile.bio }}</p>
                {% endif %}

                {% if not isOwnProfile %}
                    {% if relationshipStatus == 'approved' %}
                        <form method="post" action="{{ path('app_unfollow', {userId: profileUser.id}) }}" style="display: inline;">
                            <button type="submit" class="btn btn-danger">Unfollow</button>
                        </form>
                    {% elseif relationshipStatus == 'pending' %}
                        <span class="btn btn-secondary">Pending</span>
                    {% else %}
                        <form method="post" action="{{ path('app_follow_request', {userId: profileUser.id}) }}" style="display: inline;">
                            <button type="submit" class="btn btn-primary">Follow</button>
                        </form>
                    {% endif %}
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}
